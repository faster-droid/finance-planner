# finance-planner...

Для запуска:

docker build -t finance-planner:latest .

docker run -d -p 8080:8080 \
  --name finance-planner-app \
  -v finance-planner-db-data:/data \
  finance-planner:latest

http://82.146.40.100/finance-planner/expenses




-------------------------------------------------------------------------



 Finance Planner CI/CD 
 
## Устройство репозитория 
- Код приложения хранится в папке `src`. 
- CI/CD конфигурация находится в `.github/workflows/ci-cd.yml`. 
 
## Развёртывание инфраструктуры 
- Используйте Terraform для создания виртуальной машины. 
- Запустите `terraform init` и `terraform apply`. 
 
## Развёртывание приложения 
- Приложение автоматически разворачивается при каждом пуше в ветки `master`, `develop`, `feature/*`, `hotfix/*`. 
 
## Правила внесения изменений в инфраструктуру 
- Все изменения должны проходить через pull request. 
- Обязательно обновляйте версию приложения при внесении изменений. 
 
## Релизный цикл приложения и правила версионирования 
- Используйте семантическое версионирование: MAJOR.MINOR.PATCH. 
- Увеличивайте MAJOR при внесении несовместимых изменений, MINOR для новых функций, PATCH для исправлений. 


## Об устройстве репозитория

Этот репозиторий содержит код и конфигурации для приложения "Finance Planner", предназначенного для управления личными финансами. Вот краткое описание структуры папок и файлов:

.
├── Dockerfile                  # Файл для сборки Docker-образа
├── monitoring                  # Директория для мониторинга
│   ├── docker-compose.yml      # Конфигурация Docker Compose
│   ├── fluentd                 # Конфигурация Fluentd
│   │   └── fluent.conf         # Конфигурационный файл Fluentd
│   ├── logstash.conf           # Конфигурация Logstash
│   ├── monitoring              # Конфигурация Prometheus
│   │   ├── prometheus.yml      # Конфигурационный файл Prometheus
│   │   └── provisioning        # Директория для провизии
│   └── provisioning            # Директория для провизии
│       ├── dashboards          # Директория для дашбордов
│       │   ├── dashboard.yml   # Конфигурация дашборда
│       │   └── finance_dashboard.json # JSON для дашборда финансов
│       └── datasources         # Директория для источников данных
│           └── datasource.yml  # Конфигурация источника данных
├── pom.xml                     # Файл конфигурации Maven
├── README.md                   # Этот файл
├── script.sh                   # Скрипт для автоматизации
├── src                         # Исходный код приложения
│   ├── main                    # Основной код
│   │   ├── java                # Java-код
│   │   │   └── com
│   │   │       └── example
│   │   │           └── finance
│   │   │               ├── Expense.java          # Класс для расходов
│   │   │               └── ExpenseServlet.java   # Servlet для обработки расходов
│   │   ├── resources           # Ресурсы приложения
│   │   │   ├── db.properties   # Конфигурация базы данных
│   │   │   └── schema.sql      # SQL-схема базы данных
│   │   └── webapp              # Веб-приложение
│   │       ├── assets          # Статические ресурсы
│   │       ├── index.jsp       # Главная страница
│   │       ├── styles.css      # CSS-стили
│   │       └── WEB-INF         # Защищенные ресурсы
│   │           └── web.xml     # Конфигурация веб-приложения
│   └── test                    # Тесты
│       └── java                # Тесты на Java
│           └── com
│               └── example
│                   └── finance
│                       └── ExampleTest.java      # Тесты для приложения
└── target                      # Скомпилированные артефакты
    ├── classes                 # Скомпилированные классы
    ├── finance-planner         # Скомпилированное веб-приложение
    ├── finance-planner.war     # WAR-файл для развертывания
    ├── generated-sources       # Сгенерированные источники
    ├── generated-test-sources   # Сгенерированные тестовые источники
    ├── maven-archiver          # Архиватор Maven
    ├── maven-status             # Статус Maven
    ├── surefire-reports        # Отчеты о тестировании
    └── test-classes            # Скомпилированные тестовые классы



### **2. По развёртыванию инфраструктуры**

Этот раздел должен содержать инструкции по настройке и запуску инфраструктуры, включая все необходимые сервисы (например, базы данных, инструменты мониторинга).

```markdown
## По развёртыванию инфраструктуры

Для развертывания инфраструктуры, которая поддерживает приложение "Finance Planner", вам потребуется Docker и Docker Compose. Следуйте этим шагам:

1. **Установите Docker и Docker Compose**:
   - Для установки Docker следуйте инструкциям на [официальном сайте Docker](https://docs.docker.com/get-docker/).
   - Убедитесь, что Docker Compose установлен. Если он не установлен, следуйте инструкциям [здесь](https://docs.docker.com/compose/install/).

2. **Настройте файл `docker-compose.yml`**:
   - Перейдите в директорию `monitoring`, где находится файл `docker-compose.yml`.
   - При необходимости отредактируйте переменные окружения и конфигурации сервисов.

3. **Запустите сервисы мониторинга**:
   - Выполните следующую команду для запуска всех сервисов в фоновом режиме:

   ```bash
   cd monitoring
   docker-compose up -d



### **3. По развёртыванию приложения**

В этом разделе дайте инструкции по сборке и запуску приложения.

```markdown
## По развёртыванию приложения

После того как инфраструктура будет развернута, выполните следующие шаги для сборки и развертывания приложения "Finance Planner":

1. **Соберите проект**:
   - Убедитесь, что у вас установлен Maven. Для установки следуйте [инструкциям на официальном сайте Maven](https://maven.apache.org/install.html).
   - Перейдите в корневую директорию проекта, где находится файл `pom.xml`, и выполните:

   ```bash
   mvn clean package



### **4. О правилах внесения изменения в инфраструктуру**

Этот раздел должен содержать правила и рекомендации по внесению изменений в инфраструктуру, чтобы избежать конфликтов и ошибок.

```markdown
## О правилах внесения изменения в инфраструктуру

При внесении изменений в инфраструктуру следуйте этим рекомендациям:

1. **Создавайте отдельные ветки**:
   - Для каждой новой функции или исправления создавайте отдельную ветку в репозитории. Это поможет избежать конфликтов и упростит процесс ревью.

2. **Тестируйте изменения локально**:
   - Перед тем как вносить изменения в основную ветку, убедитесь, что все изменения протестированы и работают корректно.

3. **Документируйте изменения**:
   - При внесении изменений в инфраструктуру обновляйте соответствующие конфигурационные файлы и комментарии, чтобы другие разработчики могли легко понять ваши изменения.

4. **Создавайте Pull Request**:
   - После завершения работы над изменениями создайте Pull Request с описанием внесенных изменений. Это позволит другим участникам команды просмотреть и обсудить ваши изменения перед их слиянием.


## О релизном цикле приложения и правилах версионирования

Приложение "Finance Planner" следует семантическому версионированию. Релизы и версии приложения управляются следующим образом:

1. **Семантическое версионирование**:
   - Версии приложения обозначаются в формате `MAJOR.MINOR.PATCH`, где:
     - **MAJOR**: Увеличивается при внесении изменений, несовместимых с предыдущими версиями.
     - **MINOR**: Увеличивается при добавлении новой функциональности, совместимой с предыдущими версиями.
     - **PATCH**: Увеличивается при исправлении ошибок, не влияющих на совместимость.

2. **Релизный цикл**:
   - Релизы проводятся на основе завершенных функций и исправлений ошибок. Новый релиз должен проходить процесс тестирования и проверки.
   - Регулярно обновляйте файл `CHANGELOG.md`, чтобы документировать все изменения, внесенные в каждую версию приложения.

3. **Обновление зависимостей**:
   - При обновлении зависимостей убедитесь, что они совместимы с текущей версией приложения. Тестируйте приложение после каждого обновления зависимостей.

4. **Процесс релиза**:
   - Перед созданием нового релиза убедитесь, что все тесты проходят успешно. Создавайте релиз только после того, как все проверки будут завершены.